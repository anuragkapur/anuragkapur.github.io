<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1692.0676879882812 2010.0848999023438" width="3384.1353759765625" height="4020.1697998046875">
  <!-- svg-source:excalidraw -->
  
  <defs>
    <style class="style-fonts">
      @font-face {
        font-family: "Virgil";
        src: url("https://excalidraw.com/Virgil.woff2");
      }
      @font-face {
        font-family: "Cascadia";
        src: url("https://excalidraw.com/Cascadia.woff2");
      }
    </style>
    
  </defs>
  <rect x="0" y="0" width="1692.0676879882812" height="2010.0848999023438" fill="#ffffff"></rect><g transform="translate(55.167083740234375 10) rotate(0 472.3095703125 175)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Requirements</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Given a url, return shortened url (hostname.com/(10 chars))</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Should respect query params</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Shortened url should live "forever" (horizontal scalability)</text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Shortened url should resolve to the full url in a timely manner (&lt;100ms server side latency)</text><text x="0" y="125" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Editable? Not for now</text><text x="0" y="150" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- 10M daily active write users; 3 urls added per user per day</text><text x="0" y="175" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Read/resolve traffic = 10x Write/shorten traffic</text><text x="0" y="200" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- 1B reads per day (viral url shared on social media - traffic spikes of MMs reads per second)</text><text x="0" y="225" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Resilience</text><text x="0" y="250" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">  - security: DDOS type attack</text><text x="0" y="275" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Observability</text><text x="0" y="300" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Analytics</text><text x="0" y="325" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text></g><g transform="translate(1177.4281616210938 12.367767333984375) rotate(0 252.31976318359375 100)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Parking lot / ideas to explore later</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- 2 different users want to shorten the </text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">exact same url should result in same shortened</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">or different urls?</text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Do we need Db or could we just rely on CDN</text><text x="0" y="125" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">caching forever?</text><text x="0" y="150" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Should the key:values (shortened urls) expire at </text><text x="0" y="175" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">some point?</text></g><g stroke-linecap="round" transform="translate(516.7037963867188 441.07745361328125) rotate(0 148.39202880859375 68.42633056640625)"><path d="M32 0 M32 0 C92.94 1.68, 154.75 1.43, 264.78 0 M32 0 C100.5 -0.04, 170.63 0.29, 264.78 0 M264.78 0 C284.36 -1.43, 296.61 12.31, 296.78 32 M264.78 0 C285.22 1.39, 297.98 10.31, 296.78 32 M296.78 32 C296.38 49.61, 296.63 67.39, 296.78 104.85 M296.78 32 C298.2 50.48, 297.26 68.2, 296.78 104.85 M296.78 104.85 C298.47 124.92, 284.83 136.04, 264.78 136.85 M296.78 104.85 C298.36 127.6, 286.14 136.69, 264.78 136.85 M264.78 136.85 C216.02 137.01, 169.12 137.8, 32 136.85 M264.78 136.85 C184.89 137.99, 106.21 137.83, 32 136.85 M32 136.85 C10.72 138.35, 0.11 125.3, 0 104.85 M32 136.85 C12.24 135.85, 0.06 124.99, 0 104.85 M0 104.85 C-0.51 75.9, -1.53 48.1, 0 32 M0 104.85 C0.48 85.61, 0.42 67.61, 0 32 M0 32 C-0.47 11.7, 8.96 -0.64, 32 0 M0 32 C-1.21 12.03, 10.35 0.3, 32 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(575.8143920898438 496.68267822265625) rotate(0 57.979949951171875 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Shorten Svc</text></g><g stroke-linecap="round" transform="translate(513.548095703125 694.3707885742188) rotate(0 148.39202880859375 68.42633056640625)"><path d="M32 0 M32 0 C79.03 -0.24, 125.77 1.8, 264.78 0 M32 0 C122.42 -1.86, 212.56 -2.43, 264.78 0 M264.78 0 C287.76 0.23, 295.18 11.89, 296.78 32 M264.78 0 C288.05 -1.66, 297.28 11.52, 296.78 32 M296.78 32 C296.91 58.52, 296.52 85.32, 296.78 104.85 M296.78 32 C296.98 52.69, 296.04 71.85, 296.78 104.85 M296.78 104.85 C295.88 127.71, 286.03 138.18, 264.78 136.85 M296.78 104.85 C296.07 126.86, 284.8 136.92, 264.78 136.85 M264.78 136.85 C203.52 138.65, 143.45 138.46, 32 136.85 M264.78 136.85 C201.15 136.14, 137.31 136.74, 32 136.85 M32 136.85 C12.04 137.45, 0.23 126.74, 0 104.85 M32 136.85 C10.84 134.95, 0.95 125.13, 0 104.85 M0 104.85 C-0.47 84.5, -0.9 69.83, 0 32 M0 104.85 C0.53 85.24, 0.42 65.66, 0 32 M0 32 C-1.12 10.21, 9.02 -0.39, 32 0 M0 32 C0.28 11.23, 11.18 -0.22, 32 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(572.65869140625 749.9760131835938) rotate(0 57.87995147705078 12.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Resolve Svc</text></g><g stroke-linecap="round" transform="translate(348.499755859375 696.2251586914062) rotate(0 58.53564453125 68.50607299804688)"><path d="M29.27 0 M29.27 0 C53.38 -1.29, 74 -0.88, 87.8 0 M29.27 0 C41.49 0.34, 53.9 0.02, 87.8 0 M87.8 0 C105.49 -0.33, 118.88 7.92, 117.07 29.27 M87.8 0 C107.34 1.08, 117.14 8.11, 117.07 29.27 M117.07 29.27 C117.81 53.35, 118.57 76.99, 117.07 107.74 M117.07 29.27 C117.63 52.04, 116.85 75.52, 117.07 107.74 M117.07 107.74 C116.37 125.99, 105.45 138.41, 87.8 137.01 M117.07 107.74 C114.87 128.59, 108.03 135.92, 87.8 137.01 M87.8 137.01 C69.74 135.25, 54.02 138.22, 29.27 137.01 M87.8 137.01 C66.55 137.71, 45.07 137.9, 29.27 137.01 M29.27 137.01 C8.64 135.28, -1.97 127.94, 0 107.74 M29.27 137.01 C7.94 138.16, 1.81 125.95, 0 107.74 M0 107.74 C0.93 86.07, 0.16 66.59, 0 29.27 M0 107.74 C-1.54 82.4, -1.16 54.9, 0 29.27 M0 29.27 C0.73 7.87, 11.42 -1.29, 29.27 0 M0 29.27 C-2.14 9.03, 11.64 -1.73, 29.27 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(386.3554153442383 752.2312316894531) rotate(0 20.67998504638672 12.5)"><text x="20.67998504638672" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">CDN</text></g><g stroke-linecap="round" transform="translate(10 474.94976806640625) rotate(0 74.06216430664062 42.5)"><path d="M59.54 1.9 C70.03 -0.06, 83.96 0.39, 94.82 2.04 C105.67 3.69, 116.59 7.32, 124.65 11.78 C132.71 16.24, 139.42 22.66, 143.19 28.82 C146.95 34.98, 148.79 42.15, 147.22 48.73 C145.65 55.31, 140.51 62.91, 133.78 68.28 C127.04 73.65, 117.27 78.27, 106.83 80.95 C96.39 83.62, 82.71 84.61, 71.13 84.33 C59.56 84.06, 47.42 82.59, 37.38 79.3 C27.34 76, 17.05 69.97, 10.91 64.58 C4.76 59.2, 1.39 53.58, 0.51 47 C-0.38 40.42, 1.31 31.17, 5.6 25.11 C9.89 19.04, 16.58 14.59, 26.23 10.63 C35.88 6.67, 56.02 3, 63.51 1.33 C71 -0.35, 70.99 0.09, 71.16 0.58 M91.78 2.3 C102.7 3.41, 114.69 6.38, 123.38 10.68 C132.06 14.98, 139.99 22.18, 143.88 28.09 C147.77 34.01, 147.98 40.04, 146.71 46.16 C145.44 52.29, 142.25 59.33, 136.29 64.86 C130.32 70.4, 121.16 76.03, 110.93 79.39 C100.7 82.75, 86.61 84.64, 74.91 85.02 C63.2 85.4, 51.04 84.84, 40.71 81.68 C30.37 78.53, 19.35 71.81, 12.89 66.08 C6.43 60.34, 3.18 53.47, 1.95 47.26 C0.73 41.06, 1.97 34.75, 5.55 28.84 C9.14 22.92, 15.15 16.54, 23.48 11.76 C31.8 6.99, 44.23 1.92, 55.49 0.17 C66.75 -1.57, 85.03 0.91, 91.02 1.31 C97.01 1.7, 91.67 2.06, 91.43 2.55" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(39.35235513453932 504.897729865978) rotate(0 44.83995056152344 12.5)"><text x="44.83995056152344" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Customer</text></g><g mask="url(#mask-N-KBudSE1bjg_fZu4ECoh)" stroke-linecap="round"><g transform="translate(170.84265475033482 512.8845714748086) rotate(0 169.31799409486038 -0.7547844090245235)"><path d="M1.04 0.09 C57.25 -0.37, 280.24 -1.51, 336.38 -1.6 M0.13 -0.91 C56.77 -0.74, 282.31 -0.86, 338.51 -0.54" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(170.84265475033482 512.8845714748086) rotate(0 169.31799409486038 -0.7547844090245235)"><path d="M310.44 7.8 C315.03 7.73, 323.29 5.84, 336.93 -1.47 M309.97 9.32 C318.06 7.17, 326.32 4.62, 338 -0.83" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(170.84265475033482 512.8845714748086) rotate(0 169.31799409486038 -0.7547844090245235)"><path d="M310.49 -12.72 C315.26 -8.16, 323.51 -5.42, 336.93 -1.47 M310.02 -11.2 C318.01 -7.77, 326.26 -4.74, 338 -0.83" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask id="mask-N-KBudSE1bjg_fZu4ECoh"><rect x="0" y="0" fill="#fff" width="608.3374633789062" height="613.5592386098251"></rect><rect x="285.9801118600307" y="500.0472379073003" fill="#000" width="107.21989440917969" height="25" opacity="1"></rect></mask><g transform="translate(285.98011186003066 500.0472379073003) rotate(0 54.18053698516454 12.082549158483744)"><text x="53.609947204589844" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">shorten url</text></g><g stroke-linecap="round" transform="translate(943.2212524414062 476.73040771484375) rotate(0 118.42523193359375 153.34127807617188)"><path d="M32 0 M32 0 C94.96 -0.92, 160.97 -2.43, 204.85 0 M32 0 C85.12 0.62, 136.25 0.76, 204.85 0 M204.85 0 C224.35 -1.02, 237.22 12.5, 236.85 32 M204.85 0 C224.46 -0.36, 235.12 12.41, 236.85 32 M236.85 32 C238.56 120.09, 238.33 207.14, 236.85 274.68 M236.85 32 C237.79 124.09, 236.91 214.31, 236.85 274.68 M236.85 274.68 C236.18 295.76, 225.6 308.25, 204.85 306.68 M236.85 274.68 C238.42 296.03, 228.01 306.54, 204.85 306.68 M204.85 306.68 C154.17 308.01, 104.83 305.22, 32 306.68 M204.85 306.68 C154.46 308.6, 102.74 306.96, 32 306.68 M32 306.68 C12.36 308.34, -0.38 294.77, 0 274.68 M32 306.68 C12.21 308.45, 2.17 296.6, 0 274.68 M0 274.68 C0.26 203, -0.46 128.08, 0 32 M0 274.68 C-0.06 208.34, -0.49 143.94, 0 32 M0 32 C1.24 9.42, 10.48 0.41, 32 0 M0 32 C1.69 11.69, 10.64 -2.01, 32 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(965.4365692138672 592.5716857910156) rotate(0 96.20991516113281 37.5)"><text x="96.20991516113281" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Url Store</text><text x="96.20991516113281" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">shortenedUrl (key): </text><text x="96.20991516113281" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">fullUrl (value)</text></g><g mask="url(#mask-X_gJb2iUFTSeZ90XjpJcM)" stroke-linecap="round"><g transform="translate(825.9556274414062 504.93280029296875) rotate(0 51.27689985856409 59.93850449391641)"><path d="M-1.05 0.72 C16.13 20.43, 86 98.81, 103.6 118.21 M0.6 0.06 C17.55 19.98, 85.22 100.17, 102.47 119.82" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(825.9556274414062 504.93280029296875) rotate(0 51.27689985856409 59.93850449391641)"><path d="M77.53 104.54 C85.55 111.47, 92.78 113.87, 103.23 117.98 M75.53 105.41 C85.72 110.19, 92.71 115.04, 103.26 120.71" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(825.9556274414062 504.93280029296875) rotate(0 51.27689985856409 59.93850449391641)"><path d="M93.1 91.18 C95.76 102.57, 97.63 109.58, 103.23 117.98 M91.1 92.05 C96.09 101.34, 97.92 110.62, 103.26 120.71" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask id="mask-X_gJb2iUFTSeZ90XjpJcM"><rect x="0" y="0" fill="#fff" width="1029.8988647460938" height="723.0092163085938"></rect><rect x="854.2272720336914" y="551.4710083007812" fill="#000" width="47.39994812011719" height="25" opacity="1"></rect></mask><g transform="translate(854.2272720336914 551.4710083007812) rotate(0 23.005255266278937 13.400296486103912)"><text x="23.699974060058594" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">write</text></g><g stroke-linecap="round" transform="translate(13.1065673828125 733.399169921875) rotate(0 74.06216430664062 42.5)"><path d="M65.14 -0.14 C75.87 -1.49, 91.5 0.21, 102.19 2.53 C112.89 4.85, 121.99 8.62, 129.32 13.76 C136.65 18.9, 143.46 26.74, 146.18 33.37 C148.91 40, 148.51 47.38, 145.65 53.52 C142.79 59.66, 136.88 65.31, 129.03 70.22 C121.17 75.13, 109.22 80.63, 98.5 82.97 C87.77 85.3, 75.85 85.29, 64.68 84.23 C53.51 83.18, 40.81 80.41, 31.49 76.64 C22.17 72.88, 13.85 67.47, 8.76 61.63 C3.66 55.79, 1 48.26, 0.92 41.62 C0.83 34.98, 2.92 27.46, 8.25 21.78 C13.57 16.1, 22.45 11.18, 32.86 7.53 C43.28 3.89, 63.39 1.13, 70.74 -0.09 C78.09 -1.31, 76.91 -0.5, 76.95 0.23 M53.67 3.1 C63.92 0.9, 76.91 1, 88.06 1.87 C99.21 2.74, 111.4 4.34, 120.58 8.31 C129.76 12.28, 138.39 19.28, 143.16 25.68 C147.93 32.07, 150.47 40.3, 149.2 46.67 C147.94 53.04, 141.65 58.74, 135.56 63.91 C129.47 69.07, 122.29 74.06, 112.67 77.66 C103.05 81.26, 89.66 84.99, 77.84 85.5 C66.03 86.01, 52.16 83.59, 41.79 80.72 C31.42 77.85, 22.44 73.36, 15.64 68.29 C8.84 63.22, 2.89 56.85, 1 50.3 C-0.89 43.74, 0.82 35.3, 4.33 28.96 C7.83 22.62, 13.84 16.83, 22.03 12.27 C30.22 7.72, 48.34 3.29, 53.45 1.63 C58.57 -0.02, 52.35 1.75, 52.72 2.36" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(42.45892251735182 763.3471317214467) rotate(0 44.83995056152344 12.5)"><text x="44.83995056152344" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Customer</text></g><g mask="url(#mask-F0P40mHbKB1Yvhx4VV2M_)" stroke-linecap="round"><g transform="translate(171.65502771672607 771.9198728085262) rotate(0 82.39690153308771 0.6407988537112033)"><path d="M0.11 -1.03 C27.64 -0.51, 136.63 1.96, 163.99 2.31 M-1.3 1.04 C26.69 1.29, 138.09 0.36, 166.09 0.55" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(171.65502771672607 771.9198728085262) rotate(0 82.39690153308771 0.6407988537112033)"><path d="M136.2 8.91 C144.8 7.27, 148.45 7.31, 166.04 1.1 M138.54 10.02 C146.71 7.82, 156.37 4.77, 166.2 -0.38" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(171.65502771672607 771.9198728085262) rotate(0 82.39690153308771 0.6407988537112033)"><path d="M136.17 -11.61 C144.63 -9.11, 148.29 -4.94, 166.04 1.1 M138.5 -10.5 C146.73 -6.17, 156.4 -2.69, 166.2 -0.38" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask id="mask-F0P40mHbKB1Yvhx4VV2M_"><rect x="0" y="0" fill="#fff" width="436.8082275390625" height="873.5507413052737"></rect><rect x="202.55168072848028" y="760.2353070569" fill="#000" width="103.35989379882812" height="25" opacity="1"></rect></mask><g transform="translate(202.55168072848028 760.2353070569) rotate(0 51.5002485213335 12.325364605337427)"><text x="51.67994689941406" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">resolve url</text></g><g stroke-linecap="round"><g transform="translate(482.8734130859375 756.9533081054688) rotate(0 10.959981771558546 -0.49508282039744245)"><path d="M-0.9 0.11 C2.72 0.05, 18.91 -1.25, 22.82 -1.09 M0.82 -0.88 C4.17 -0.76, 18.26 -0.15, 21.72 -0.11" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(482.8734130859375 756.9533081054688) rotate(0 10.959981771558546 -0.49508282039744245)"><path d="M10.84 3.23 C14 1.69, 20.39 0.7, 20.59 0.52 M10.98 3.58 C14.16 1.83, 17.75 1.26, 21.94 0.31" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(482.8734130859375 756.9533081054688) rotate(0 10.959981771558546 -0.49508282039744245)"><path d="M11.08 -4.68 C14.1 -3.14, 20.39 -1.06, 20.59 0.52 M11.22 -4.32 C14.32 -3.39, 17.83 -1.27, 21.94 0.31" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(828.7064819335938 755.009765625) rotate(0 50.18259356650992 -47.34406257740227)"><path d="M0.24 -0.53 C17.32 -16.44, 84.79 -78.79, 101.46 -94.55 M-1.09 1.8 C16.02 -14.57, 84.33 -80.54, 101.09 -96.49" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(828.7064819335938 755.009765625) rotate(0 50.18259356650992 -47.34406257740227)"><path d="M86.97 -67.73 C91.05 -75.54, 92.98 -81.82, 99.6 -94.61 M87.18 -69.93 C91.9 -78.41, 96.79 -87.51, 100.69 -97.32" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(828.7064819335938 755.009765625) rotate(0 50.18259356650992 -47.34406257740227)"><path d="M72.76 -82.54 C80 -87.21, 84.98 -90.31, 99.6 -94.61 M72.97 -84.73 C82.32 -88.3, 91.96 -92.46, 100.69 -97.32" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(37.43743896484375 963.3892211914062) rotate(0 335.16973876953125 62.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Shorten Svc</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Computes 10char hash of incoming url and generates a </text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">shortened url</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Authn users only? Can help with rate limiting per user to prevent </text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">abuse/DDOS</text></g><g stroke-linecap="round" transform="translate(65.5015869140625 1159.7091064453125) rotate(0 70.25692749023438 135.39678955078125)"><path d="M32 0 M32 0 C51.23 0.93, 65.18 -1.37, 108.51 0 M32 0 C58.51 0.32, 83.61 -0.01, 108.51 0 M108.51 0 C128.28 1.68, 141.67 12.19, 140.51 32 M108.51 0 C131.48 -0.97, 142.55 9.07, 140.51 32 M140.51 32 C138.6 86.48, 139.41 144.86, 140.51 238.79 M140.51 32 C140.51 90.71, 140.6 149.14, 140.51 238.79 M140.51 238.79 C139.08 261.95, 131.74 269.76, 108.51 270.79 M140.51 238.79 C139.44 259.79, 128.69 268.51, 108.51 270.79 M108.51 270.79 C79.44 270.3, 49.35 270.78, 32 270.79 M108.51 270.79 C86.03 270.5, 63.54 270.8, 32 270.79 M32 270.79 C10.65 272.26, -0.84 259.25, 0 238.79 M32 270.79 C9.65 271.92, -0.86 261.11, 0 238.79 M0 238.79 C0.57 193.83, 1.54 147.91, 0 32 M0 238.79 C-0.13 188.13, 1.41 138.35, 0 32 M0 32 C-0.75 10.78, 11.92 -0.43, 32 0 M0 32 C-1.22 9.87, 8.78 -1.36, 32 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(104.51727294921875 1257.821044921875) rotate(0 30.439979553222656 25)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Global</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Lb</text></g><g stroke-linecap="round" transform="translate(318.49249267578125 1156.5559692382812) rotate(0 73.302978515625 59.052947998046875)"><path d="M29.53 0 M29.53 0 C59 2.4, 85.95 -0.48, 117.08 0 M29.53 0 C55.57 -0.02, 83.12 0.08, 117.08 0 M117.08 0 C135.14 -0.64, 146.48 10.39, 146.61 29.53 M117.08 0 C136.68 -0.34, 146.42 10.48, 146.61 29.53 M146.61 29.53 C145.4 50.25, 145.98 74.41, 146.61 88.58 M146.61 29.53 C146.77 42.61, 147.18 54.46, 146.61 88.58 M146.61 88.58 C146.68 107.17, 134.97 117.82, 117.08 118.11 M146.61 88.58 C145.2 110.21, 138.88 116.44, 117.08 118.11 M117.08 118.11 C81.76 118.7, 52.16 117.58, 29.53 118.11 M117.08 118.11 C86.1 119.85, 54.07 118.54, 29.53 118.11 M29.53 118.11 C11.04 120.02, -0.48 109, 0 88.58 M29.53 118.11 C8.99 116.28, 1.19 106.86, 0 88.58 M0 88.58 C-0.89 66.61, -1.72 47.12, 0 29.53 M0 88.58 C-0.32 68.76, 0.88 47.73, 0 29.53 M0 29.53 C-0.99 10.36, 11.79 -1.94, 29.53 0 M0 29.53 C1.12 9.87, 8.86 0.55, 29.53 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(352.8355026245117 1190.6089172363281) rotate(0 38.95996856689453 25)"><text x="38.95996856689453" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Regional</text><text x="38.95996856689453" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Lb</text></g><g stroke-linecap="round" transform="translate(321.58056640625 1305.5075378417969) rotate(0 73.302978515625 59.052947998046875)"><path d="M29.53 0 M29.53 0 C46.88 -0.23, 66.46 -0.69, 117.08 0 M29.53 0 C62.59 -0.27, 93.6 0.35, 117.08 0 M117.08 0 C138.53 1.21, 148.39 10.61, 146.61 29.53 M117.08 0 C136.62 1.71, 147.17 10.2, 146.61 29.53 M146.61 29.53 C147.52 52.13, 146.73 72.7, 146.61 88.58 M146.61 29.53 C145.53 44.23, 146.89 59.16, 146.61 88.58 M146.61 88.58 C145.62 109.41, 136.42 119.77, 117.08 118.11 M146.61 88.58 C147.93 109.54, 135.35 118.43, 117.08 118.11 M117.08 118.11 C97.31 119.99, 77.49 119.9, 29.53 118.11 M117.08 118.11 C95.44 118.7, 73.14 118.79, 29.53 118.11 M29.53 118.11 C8.03 119.86, 1.47 109.23, 0 88.58 M29.53 118.11 C10.79 118.1, 0.27 107.82, 0 88.58 M0 88.58 C-0.04 70.24, -1.92 53.75, 0 29.53 M0 88.58 C-1.32 65.43, -1.41 43.7, 0 29.53 M0 29.53 C-0.81 8.28, 8.97 -0.71, 29.53 0 M0 29.53 C-0.66 11.39, 8.27 1.71, 29.53 0" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(355.92357635498047 1339.5604858398438) rotate(0 38.95996856689453 25)"><text x="38.95996856689453" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Regional</text><text x="38.95996856689453" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="middle" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Lb</text></g><g stroke-linecap="round"><g transform="translate(219.7755126953125 1284.8622436523438) rotate(0 43.68684701535386 -33.4511499428329)"><path d="M0.55 0.73 C15.13 -10.11, 73.36 -54.7, 88 -65.88 M-0.63 0.07 C13.74 -11.04, 72.26 -56.81, 86.99 -67.63" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(219.7755126953125 1284.8622436523438) rotate(0 43.68684701535386 -33.4511499428329)"><path d="M72 -42.6 C77.68 -50.7, 82.47 -60.12, 85.99 -66.45 M71.68 -43.28 C74.94 -50.26, 79.89 -58.13, 87.29 -68.62" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(219.7755126953125 1284.8622436523438) rotate(0 43.68684701535386 -33.4511499428329)"><path d="M59.56 -58.92 C69.38 -61.5, 78.42 -65.33, 85.99 -66.45 M59.25 -59.61 C66.39 -61.51, 75.19 -64.34, 87.29 -68.62" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(221.070556640625 1285.3043212890625) rotate(0 43.89053688352462 40.0012759769196)"><path d="M-0.08 -0.76 C14.66 12.55, 74.42 66.33, 89.36 79.84 M-1.58 1.46 C12.96 14.86, 73.49 67.46, 88.59 80.76" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(221.070556640625 1285.3043212890625) rotate(0 43.89053688352462 40.0012759769196)"><path d="M59.36 70.5 C69.16 74.92, 80.45 76.66, 89.03 81.66 M60.35 69.79 C71.64 73.19, 82.98 77.51, 88.27 81.42" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(221.070556640625 1285.3043212890625) rotate(0 43.89053688352462 40.0012759769196)"><path d="M72.87 55.06 C77.6 65.27, 83.81 72.82, 89.03 81.66 M73.86 54.34 C80.12 63.76, 86.29 73.99, 88.27 81.42" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(480.25439453125 1208.5125122070312) rotate(0 41.87376418958422 -37.729036001116015)"><path d="M0.04 0.25 C13.89 -12.19, 68.88 -63.15, 83.03 -75.7 M-1.4 -0.67 C12.8 -12.88, 70.82 -62.42, 85.15 -74.62" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(480.25439453125 1208.5125122070312) rotate(0 41.87376418958422 -37.729036001116015)"><path d="M70.76 -50.41 C73.53 -54.97, 78.98 -65.82, 83.34 -74.85 M70.57 -47.95 C75.67 -59.11, 80.89 -68.64, 84.87 -74.7" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(480.25439453125 1208.5125122070312) rotate(0 41.87376418958422 -37.729036001116015)"><path d="M57.45 -66.02 C64.02 -65.97, 73.4 -72.2, 83.34 -74.85 M57.25 -63.57 C67.29 -69.1, 77.38 -72.91, 84.87 -74.7" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(481.6324462890625 1205.1647338867188) rotate(0 44.07001576051118 -0.5503034673631646)"><path d="M-0.95 0.55 C13.8 0.36, 74.07 -1.3, 89.09 -1.65 M0.76 -0.2 C15.32 -0.25, 73.68 -0.62, 88.32 -0.73" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(481.6324462890625 1205.1647338867188) rotate(0 44.07001576051118 -0.5503034673631646)"><path d="M61.12 10.31 C68.17 6.98, 78.18 3.68, 90.22 1.22 M60.9 8.93 C67.63 6.87, 77.66 3.25, 88.07 -0.2" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(481.6324462890625 1205.1647338867188) rotate(0 44.07001576051118 -0.5503034673631646)"><path d="M60.98 -10.21 C68 -6.33, 78.05 -2.43, 90.22 1.22 M60.76 -11.59 C67.37 -7.65, 77.45 -5.26, 88.07 -0.2" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(481.46124267578125 1207.4757080078125) rotate(0 46.88749644267841 30.48726491936486)"><path d="M-0.75 0.91 C14.56 10.97, 76.74 49.69, 92.32 59.54 M1.06 0.34 C16.69 10.6, 79.42 50.5, 94.52 60.64" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(481.46124267578125 1207.4757080078125) rotate(0 46.88749644267841 30.48726491936486)"><path d="M66.81 52.23 C73.82 55.43, 84.55 56.91, 93.92 60.78 M65.53 54.47 C76.88 55.69, 87.01 58.82, 94.54 60.98" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(481.46124267578125 1207.4757080078125) rotate(0 46.88749644267841 30.48726491936486)"><path d="M78 35.03 C81.08 44.02, 88 51.36, 93.92 60.78 M76.73 37.27 C83.99 44.87, 89.99 54.36, 94.54 60.98" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(489.1166232992383 1373.4284335350571) rotate(0 43.614924249998296 -1.1550403319862426)"><path d="M0.17 -0.47 C14.91 -0.87, 73.53 -1.65, 88.43 -1.65 M-1.2 -1.76 C13.35 -2.13, 72.24 -1.17, 87.32 -0.72" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(489.1166232992383 1373.4284335350571) rotate(0 43.614924249998296 -1.1550403319862426)"><path d="M58.13 8.43 C65.45 7.4, 76.05 4.51, 88.36 -1.12 M59.52 9.03 C64.78 6.29, 72.23 5.28, 86.43 0.24" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(489.1166232992383 1373.4284335350571) rotate(0 43.614924249998296 -1.1550403319862426)"><path d="M58.57 -12.09 C65.89 -6.95, 76.35 -3.68, 88.36 -1.12 M59.96 -11.49 C65.31 -9.39, 72.65 -5.56, 86.43 0.24" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(488.94541968595706 1375.739407656151) rotate(0 46.91541523113847 30.427769688987155)"><path d="M-0.31 -1.16 C15.35 8.99, 78.4 50.08, 94.14 60.44 M1.73 0.84 C17.29 11.25, 78.28 52.33, 93.63 62.02" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(488.94541968595706 1375.739407656151) rotate(0 46.91541523113847 30.427769688987155)"><path d="M62.5 56.55 C73.7 58.79, 83.8 59.14, 92.35 63.92 M63.68 54.51 C70.48 57.17, 75.6 58.9, 94.23 61.15" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(488.94541968595706 1375.739407656151) rotate(0 46.91541523113847 30.427769688987155)"><path d="M73.75 39.39 C81.35 46.99, 87.92 52.73, 92.35 63.92 M74.93 37.35 C79.52 43.54, 82.33 48.82, 94.23 61.15" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g stroke-linecap="round"><g transform="translate(490.982666015625 1372.827880859375) rotate(0 41.970193328014545 -28.429485730780243)"><path d="M0.83 -0.79 C14.98 -10.3, 70.54 -47.21, 84.13 -56.76 M-0.19 1.41 C13.93 -8.43, 69.37 -48.56, 83.52 -58.27" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(490.982666015625 1372.827880859375) rotate(0 41.970193328014545 -28.429485730780243)"><path d="M65.12 -32.54 C72.31 -41.35, 74.11 -44.17, 81.85 -58.57 M66.04 -33.01 C72.73 -42.42, 80.17 -51.95, 83.81 -58.55" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g><g transform="translate(490.982666015625 1372.827880859375) rotate(0 41.970193328014545 -28.429485730780243)"><path d="M53.27 -49.29 C63.29 -54.25, 67.86 -53.13, 81.85 -58.57 M54.18 -49.76 C65.65 -52.7, 77.71 -55.7, 83.81 -58.55" stroke="#1e1e1e" stroke-width="1" fill="none"></path></g></g><mask></mask><g transform="translate(613.8511352539062 1232.242431640625) rotate(0 81.17992401123047 50)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Horizontally</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">scalable</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">farm of compute</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">instances</text></g><g transform="translate(971.9036254882812 949.3804321289062) rotate(0 302.1997985839844 187.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Url store</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Globally available Db</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Cassandra</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Strong write consistency (All instead of</text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Quorum, One etc)</text><text x="0" y="125" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">  - Enables heavy caching of the read path</text><text x="0" y="150" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Sharded for horizontal scaling</text><text x="0" y="175" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Replicas for fault tolerance</text><text x="0" y="200" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">  - Read replicas to handle spikes of read traffic</text><text x="0" y="225" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">  for a popular key</text><text x="0" y="250" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">  - A read cache in front of the Db feels unnecessary, read</text><text x="0" y="275" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">  replicas should suffice</text><text x="0" y="300" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Consistent hashing</text><text x="0" y="325" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">  - Easier (relatively) to re-shard</text><text x="0" y="350" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text></g><g transform="translate(970.0071411132812 1348.7711791992188) rotate(0 236.70982360839844 112.5)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Resolve Svc</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Reads from Url store (once per key</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">irrespective of read traffic for that key</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Responds with HTTP cache headers for </text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">CDN to read and cache heavily</text><text x="0" y="125" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- HTTP 301 (permanent redirect)</text><text x="0" y="150" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Same global and regional Lb setup as Shorten</text><text x="0" y="175" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">svc</text><text x="0" y="200" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text></g><g transform="translate(55.738677978515625 1550.0848999023438) rotate(0 383.97967529296875 225)"><text x="0" y="0" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Hashing to generate short url</text><text x="0" y="25" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- 10 char hash; 24*2 (case sensitive) (A-Z, a-z) + 10 (0-9)</text><text x="0" y="50" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">  = 58^10 unique values before we start seeing hash collissions</text><text x="0" y="75" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Integrate CDN with some for of analytics svc to get stats of usage/</text><text x="0" y="100" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">popular urls, unused urls etc</text><text x="0" y="125" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text><text x="0" y="150" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- Could use a hash function like SHA-256 and then pick the first 10 chars?</text><text x="0" y="175" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">Similar to how git hashes work? Although our requirement to prevent collisions</text><text x="0" y="200" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">is global compared to what git needs (per repo level collision prevention)</text><text x="0" y="225" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge"></text><text x="0" y="250" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">- What happens when there is a hash collision?</text><text x="0" y="275" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">  - 2 types of collisions</text><text x="0" y="300" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">    - we've run out of unique values possible (58^10)</text><text x="0" y="325" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">      - can't do muc: add an 11th character?</text><text x="0" y="350" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">    - hash function limitation leading to a collision</text><text x="0" y="375" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">      - recompute using a different salt, keep doing until there is</text><text x="0" y="400" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">      no collision</text><text x="0" y="425" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#1e1e1e" text-anchor="start" style="white-space: pre;" direction="ltr" dominant-baseline="text-before-edge">  </text></g></svg>